var CodeCamp;(function(n){var t;(function(n){function t(){var n=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,25}$/;VeeValidate.Validator.extend("strongPassword",{getMessage:function(n){return"The "+n+" requires an uppercase, a lower case and a number."},validate:function(t){return n.test(t)}})}n.createValidators=t})(t=n.Common||(n.Common={}))})(CodeCamp||(CodeCamp={})),function(n){var t;(function(n){function t(){Vue.filter("formatDate",function(n){var t=null;return typeof n=="string"?(t=moment(n),t.isValid()||(t=moment(n,"MM-DD-YYYY"))):n&&(t=moment(String(n))),t?t.format("MM-DD-YYYY"):void 0});Vue.filter("formatTime",function(n){if(n)return moment(String(n)).format("hh:mm a")})}n.createFilters=t})(t=n.Common||(n.Common={}))}(CodeCamp||(CodeCamp={})),function(n){var t;(function(n){function t(){Vue.component("datepicker",{props:["value"],template:'<input type="text"             class="v-datepicker"             ref="input"             v-bind:value="value | formatDate"             v-on:input="$emit(\'input\', $event.target.value)"/>',mounted:function(){$(this.$el).datepicker({dateFormat:"mm-dd-yy",showOn:"button",autoclose:!0,buttonImage:"/img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",onClose:this.onClose})},methods:{onClose:function(n){this.$emit("input",n)}},watch:{value:function(n){$(this.el).datepicker("setDate",n)}}})}n.createDatePicker=t})(t=n.Common||(n.Common={}))}(CodeCamp||(CodeCamp={})),function(n){n.App={setup:function(){Vue.use(VeeValidate);Vue.use(VueResource);n.Common.createValidators();n.Common.createFilters();n.Common.createDatePicker();Vue.config.errorHandler=function(n){console.log(n)}},bootstrap:function(n){this.setup();new Vue(n)}}}(CodeCamp||(CodeCamp={})),function(n){var t;(function(n){var t=function(){function n(n){this.http=n}return n.prototype.baseUrl=function(n){return n===void 0&&(n=this.moniker),"/"+n+"/api/"},Object.defineProperty(n.prototype,"moniker",{get:function(){return window.location.pathname.split("/")[1]},enumerable:!0,configurable:!0}),n.prototype.getAllEvents=function(){return this.http.get("/api/events/")},n.prototype.getEventInfo=function(){return this.http.get("/api/events/"+this.moniker)},n.prototype.saveEventInfo=function(n){return this.http.put("/api/events/"+this.moniker,n)},n.prototype.saveEventLocation=function(n){return this.http.put("/api/events/"+this.moniker+"/location",n)},n.prototype.addEventInfo=function(n){return this.http.post("/api/events/"+n,{moniker:n})},n.prototype.getSponsors=function(){return this.http.get(this.baseUrl()+"sponsors")},n.prototype.saveSponsor=function(n){return this.http.post(this.baseUrl()+"sponsors",n)},n.prototype.deleteSponsor=function(n){return this.http.delete(this.baseUrl()+"sponsors/"+n.id)},n.prototype.togglePaid=function(n){return this.http.put(this.baseUrl()+"sponsors/"+n.id+"/togglePaid/",null)},n.prototype.getMySpeaker=function(){return this.http.get(this.baseUrl()+"speakers/me")},n.prototype.saveSpeaker=function(n){return this.http.post(this.baseUrl()+"speakers/me",n)},n.prototype.getTalks=function(){return this.http.get(this.baseUrl()+"talks/me")},n.prototype.getAllTalks=function(){return this.http.get(this.baseUrl()+"talks")},n.prototype.saveTalk=function(n){return this.http.post(this.baseUrl()+"speakers/me/talks",n)},n.prototype.deleteTalk=function(n){return this.http.delete(this.baseUrl()+"talks/"+n)},n.prototype.toggleApproved=function(n){return this.http.put(this.baseUrl()+"talks/"+n.id+"/toggleApproved",n)},n.prototype.updateTalkRoom=function(n,t){return this.http.put(this.baseUrl()+"talks/"+n.id+"/room",{room:t})},n.prototype.updateTalkTime=function(n,t){return this.http.put(this.baseUrl()+"talks/"+n.id+"/time",{time:t})},n.prototype.updateTalkTrack=function(n,t){return this.http.put(this.baseUrl()+"talks/"+n.id+"/track",{track:t})},n.prototype.getUsers=function(){return this.http.get("/api/users")},n.prototype.toggleAdmin=function(n){return this.http.put("/api/users/"+encodeURIComponent(n.userName)+"/toggleAdmin",n)},n.prototype.toggleConfirmation=function(n){return this.http.put("/api/users/"+encodeURIComponent(n.userName)+"/toggleconfirmation",n)},n.prototype.getTimeSlots=function(){return this.http.get(this.baseUrl()+"timeSlots")},n.prototype.saveTimeSlot=function(n){return this.http.post(this.baseUrl()+"timeSlots",{time:n})},n.prototype.deleteTimeSlot=function(n){return this.http.delete(this.baseUrl()+"timeSlots/"+n.id)},n.prototype.getRooms=function(){return this.http.get(this.baseUrl()+"rooms")},n.prototype.saveRoom=function(n){return this.http.post(this.baseUrl()+"rooms",{name:n})},n.prototype.deleteRoom=function(n){return this.http.delete(this.baseUrl()+"rooms/"+n.id)},n.prototype.getTracks=function(){return this.http.get(this.baseUrl()+"tracks")},n.prototype.saveTrack=function(n){return this.http.post(this.baseUrl()+"tracks",{name:n})},n.prototype.deleteTrack=function(n){return this.http.delete(this.baseUrl()+"tracks/"+n.id)},n}();n.DataService=t;n.dataService=new t(Vue.http)})(t=n.Common||(n.Common={}))}(CodeCamp||(CodeCamp={})),function(n){function t(){n.App.bootstrap(n.AdminEventsView)}n.adminEvents=t;n.AdminEventsView={el:"#events-view",data:{campEvents:[],errorMessage:"",currentEvent:null,newEventMoniker:"",selectedModelMoniker:""},methods:{onEventChanged:function(n){this.currentEvent=_.find(this.campEvents,function(t){return t.moniker===n})},onAddEvent:function(){n.Common.dataService.addEventInfo(this.newEventMoniker).then(function(n){this.campEvents.splice(0,0,n.body);this.currentEvent=n.body;this.selectedModelMoniker=n.data.moniker;this.newEventMoniker=""}.bind(this),function(){this.errorMessage="Failed to save new event"}.bind(this))}},mounted:function(){n.Common.dataService.getAllEvents().then(function(n){this.campEvents=n.data;this.currentEvent=_.first(this.campEvents);this.selectedModelMoniker=this.currentEvent.moniker}.bind(this),function(){this.errorMessage="Failed to get event data"}.bind(this))}}}(CodeCamp||(CodeCamp={})),function(n){function t(){n.App.bootstrap(n.adminScheduleView)}n.adminSchedule=t;n.adminScheduleView={el:"#schedule-view",data:{busy:!0,talks:[],rooms:[],timeSlots:[],tracks:[],errorMessage:"",userMessage:"",sort:"",sortAsc:!0,summary:{speakers:0,approved:0,talks:0}},methods:{showError:function(n){this.errorMessage=n},setMsg:function(n){var t=this;this.userMessage=n;window.setTimeout(function(){return t.userMessage=""},5e3)},onTrackChanged:function(t,i){var r=this,u;this.busy=!0;this.userMessage="";this.errorMessage="";u=this.tracks[i.target.selectedIndex];n.Common.dataService.updateTalkTrack(t,u.name).then(function(){return r.setMsg("Saved...")},function(){return r.showError("Failed to update talk")}).finally(function(){return r.busy=!1})},onRoomChanged:function(t,i){var r=this,u;this.busy=!0;this.userMessage="";this.errorMessage="";u=this.rooms[i.target.selectedIndex];n.Common.dataService.updateTalkRoom(t,u.name).then(function(){r.setMsg("Saved...")},function(){r.showError("Failed to update talk")}).finally(function(){return r.busy=!1})},onTimeChanged:function(t,i){var r=this,u;this.busy=!0;this.userMessage="";this.errorMessage="";u=this.timeSlots[i.target.selectedIndex];n.Common.dataService.updateTalkTime(t,u.time).then(function(){return r.setMsg("Saved...")},function(){return r.showError("Failed to update talk")}).finally(function(){return r.busy=!1})},onSort:function(n){var t=this;n==this.sort?this.sortAsc?this.sortAsc=!1:(this.sort="title",this.sortAsc=!0):(this.sort=n,this.sortAsc=!0);this.talks=this.talks.sort(function(n,i){return n[t.sort]==i[t.sort]?0:n[t.sort]<i[t.sort]?t.sortAsc?-1:1:t.sortAsc?1:-1})},updateSummary:function(){this.summary.approved=this.talks.filter(function(n){return n.approved}).length;this.summary.talks=this.talks.length;this.summary.speakers=this.talks.map(function(n){return n.speaker.name}).filter(function(n,t,i){return i.indexOf(n)===t}).length},onDelete:function(t){var i=this;this.busy=!0;n.Common.dataService.deleteTalk(t.id).then(function(){i.talks.splice(i.talks.indexOf(t),1);i.updateSummary()},function(){return i.showError("Failed to delete talk")}).finally(function(){return i.busy=!1})},onToggleApproved:function(t){var i=this;this.busy=!0;n.Common.dataService.toggleApproved(t).then(function(){t.approved=!t.approved;i.updateSummary()},function(){return i.showError("Failed to toggle approved flag")}).finally(function(){return i.busy=!1})}},mounted:function(){Vue.Promise.all([n.Common.dataService.getAllTalks(),n.Common.dataService.getRooms(),n.Common.dataService.getTimeSlots(),n.Common.dataService.getTracks()]).then(function(n){this.talks=n[0].data;this.rooms=n[1].data;this.timeSlots=n[2].data;this.tracks=n[3].data;this.updateSummary()}.bind(this),function(){this.errorMessage="Failed to load data"}.bind(this)).finally(function(){this.busy=!1}.bind(this))}}}(CodeCamp||(CodeCamp={})),function(n){function t(){n.App.bootstrap(n.adminSponsorsView)}n.adminSponsors=t;n.adminSponsorsView={el:"#sponsors-view",data:{busy:!0,sponsors:[],currentSponsor:null,errorMessage:"",userMessage:"",imageError:""},computed:{validImage:function(){return this.currentSponsor&&this.currentSponsor.imageUrl&&this.currentSponsor.imageUrl.length>0?!0:!1},isPristine:function(){return}},methods:{onTogglePaid:function(t){var i=this;this.busy=!0;n.Common.dataService.togglePaid(t).then(function(){return t.paid=!t.paid},function(){return i.errorMessage="Could not toggle paid"}).finally(function(){return i.busy=!1})},onEdit:function(n){this.currentSponsor=n;this.$validator.validateAll()},onDelete:function(t){var i=this;this.busy=!0;n.Common.dataService.deleteSponsor(t).then(function(){return i.sponsors.splice(i.sponsors.indexOf(t),1)},function(){return i.errorMessage="Could not delete sponsor"}).finally(function(){return i.busy=!1})},onNew:function(){this.currentSponsor={};this.$validator.validateAll()},onSave:function(){var t=this,i=this.sponsors.indexOf(this.currentSponsor);i>-1&&this.sponsors.splice(this.sponsors.indexOf(this.currentSponsor),1);this.busy=!0;n.Common.dataService.saveSponsor(this.currentSponsor).then(function(n){t.sponsors.push(n.data);t.currentSponsor=null},function(){return t.errorMessage="Could not save sponsor"}).finally(function(){return t.busy=!1})},onCancel:function(){this.currentSponsor=null},onImagePicked:function(){var t=this,i;this.busy=!0;i=jQuery("#thePicker")[0].files[0];n.Common.imageUploadService.uploadSponsor(i).then(function(n){Vue.set(t.currentSponsor,"imageUrl",n)},function(){return t.errorMessage="Failed to upload Image"}).finally(function(){return t.busy=!1})},onShowPicker:function(){jQuery("#thePicker").click()}},mounted:function(){var t=this;n.Common.dataService.getSponsors().then(function(n){this.sponsors=n.data;this.currentSponsor=null}.bind(this),function(){return t.errorMessage="Failed to load data"}).finally(function(){return t.busy=!1})}}}(CodeCamp||(CodeCamp={})),function(n){var t;(function(t){var i=function(){function t(){}return t.prototype.uploadSpeaker=function(n){return this.uploadImage(n,"speakers")},t.prototype.uploadSponsor=function(t,i){return i===void 0&&(i=n.Common.dataService.moniker),this.uploadImage(t,"sponsors",i)},t.prototype.uploadImage=function(t,i,r){return r===void 0&&(r=n.Common.dataService.moniker),new Vue.Promise(function(n,u){var f=new XMLHttpRequest,e;f.onreadystatechange=function(){if(f.readyState===4)if(f.status>=200&&f.status<=299){var t=f.getResponseHeader("location");t||(t=JSON.parse(f.responseText).location);n(t)}else u(f.response)};f.open("POST","/"+r+"/api/images/"+i,!0);e=new FormData;e.append("file",t,t.name);f.send(e)})},t}();t.ImageUploadService=i;t.imageUploadService=new i})(t=n.Common||(n.Common={}))}(CodeCamp||(CodeCamp={})),function(n){function t(){Vue.use(VueRouter);n.App.bootstrap({router:n.callForSpeakersRouter.router,el:"#call-for-speaker-view"})}n.callForSpeakers=t}(CodeCamp||(CodeCamp={})),function(n){n.SpeakerEditorView={template:"#speaker-editor",data:function(){return{busy:!0,errorMessage:"",infoMessage:"",speaker:{},imageError:"",filePicker:{}}},methods:{onSaveSpeaker:function(){var t=this;this.$validator.validateAll().then(function(i){i&&(t.busy=!0,t.errorMessage="",t.infoMessage="",n.speakerData.saveSpeaker(t.speaker).then(function(){n.callForSpeakersRouter.router.push({name:"info"});this.infoMessage="Saved..."}.bind(t),function(){this.errorMessage="Failed to save speaker. Please check your input fields for errors."}.bind(t)).finally(function(){this.busy=!1}.bind(t)))})},onFilePicker:function(){this.$refs.filePicker.click()},onImagePicked:function(){var n=this;this.isBusy=!0;this.$imgService.uploadSpeaker(this.$refs.filePicker.files[0]).then(function(t){n.speaker.imageUrl=t;n.$forceUpdate()},function(t){n.imageError=t}).finally(function(){return n.isBusy=!1})},validImage:function(){return this.speaker&&this.speaker.imageUrl&&this.speaker.imageUrl.length>0}},mounted:function(){this.$imgService=new n.Common.ImageUploadService;n.speakerData.getSpeaker().then(function(n){n&&(this.speaker=n);this.busy=!1}.bind(this),function(){this.errorMessage="Failed to load speaker";this.busy=!1}.bind(this))}}}(CodeCamp||(CodeCamp={})),function(n){var t=function(){function t(){this._speaker=null}return t.prototype.getSpeaker=function(){var t=this;return new Vue.Promise(function(i,r){this._speaker==null?Vue.Promise.all([n.Common.dataService.getMySpeaker(),n.Common.dataService.getTalks()]).then(function(n){t._speaker=n[0].data;t._speaker.talks=n[1].data;i(t._speaker)},function(){r()}):i(t._speaker)})},t.prototype.saveSpeaker=function(t){return this._speaker=t,n.Common.dataService.saveSpeaker(t)},t.prototype.deleteTalk=function(t){var i=this;return new Vue.Promise(function(r,u){n.Common.dataService.deleteTalk(t.id).then(function(){i._speaker.talks.splice(i._speaker.talks.indexOf(t),1);r()},function(){return u()})})},t.prototype.saveTalk=function(t){var i=this;return new Vue.Promise(function(r,u){n.Common.dataService.saveTalk(t).then(function(n){var t=n.body,u=_.find(i._speaker.talks,function(n){return n.id==t.id});u||i._speaker.talks.push(t);r()},function(){u()})})},t}();n.SpeakerService=t;n.speakerData=new t}(CodeCamp||(CodeCamp={})),function(n){n.SpeakerInfoView={template:"#speaker-info",data:function(){return{busy:!0,errorMessage:"",speaker:null}},methods:{onDeleteTalk:function(t){var i=this;this.busy=!0;this.errorMessage="";n.speakerData.deleteTalk(t).then(function(){},function(){return i.errorMessage="Failed to delete talk"}).finally(function(){return i.busy=!1})}},mounted:function(){if(!this.speaker){var t=this;n.speakerData.getSpeaker().then(function(i){i&&i.id!=0?t.speaker=i:n.callForSpeakersRouter.router.push({name:"editor"})},function(){return t.errorMessage="Failed to load speaker"})}}}}(CodeCamp||(CodeCamp={})),function(n){var t;(function(n){n.helpers={isPristine:function(n){return Object.keys(n).every(function(t){return n[t]&&n[t].pristine})}}})(t=n.Common||(n.Common={}))}(CodeCamp||(CodeCamp={})),function(n){n.SpeakerTalkEditorView={template:"#speaker-talk-editor",data:function(){return{busy:!0,errorMessage:"",speaker:{},talk:{}}},methods:{onSave:function(){var t=this;this.$validator.validateAll().then(function(i){i&&(t.busy=!0,t.errorMessage="",n.speakerData.saveTalk(t.talk).then(function(){n.callForSpeakersRouter.router.push({name:"info"})},function(){this.errorMessage="Failed to save speaker."}).then(function(){return t.busy=!1}))})}},computed:{isPristine:function(){return n.Common.helpers.isPristine(this.fields)}},mounted:function(){n.speakerData.getSpeaker().then(function(n){n&&(this.speaker=n);var t=this.$route.params.id;t!="new"&&(this.talk=_.find(this.speaker.talks,function(n){return n.id==t}));this.busy=!1}.bind(this),function(){this.errorMessage="Failed to load speaker";this.busy=!1}.bind(this))}}}(CodeCamp||(CodeCamp={})),function(n){var t=[{path:"/",redirect:{name:"info"}},{path:"/info",name:"info",component:n.SpeakerInfoView},{path:"/edit",name:"editor",component:n.SpeakerEditorView},{path:"/talks/:id",name:"talkEditor",component:n.SpeakerTalkEditorView,props:!0},{path:"*",redirect:{name:"info"}}];n.callForSpeakersRouter={router:new VueRouter({routes:t})}}(CodeCamp||(CodeCamp={})),function(n){var t=function(){function n(){this.id=0;this.audience="Developers";this.level="Beginner";this.category="General Discussion"}return n}();n.Talk=t}(CodeCamp||(CodeCamp={})),function(n){function t(){n.App.bootstrap(n.EventInfoView)}n.eventInfo=t;n.EventInfoView={el:"#event-info-view",data:{busy:!0,theEvent:{},errorMessage:"",eventMessage:"",locationMessage:"",rooms:[],timeSlots:[],tracks:[],newRoom:"",newTrack:"",newTimeSlot:""},methods:{onSaveEvent:function(){var t=this;return this.$validator.validateAll("theEvent").then(function(i){i&&(t.busy=!0,t.errorMessage="",t.eventMessage="Please Wait...",n.Common.dataService.saveEventInfo(t.theEvent).then(function(){this.eventMessage="Saved..."}.bind(t),function(){this.eventMessage="Failed to save changes..."}.bind(t)).finally(function(){return t.busy=!1}).bind(t))},function(){this.eventMessage="Please fix any validation errors..."}),!1},onSaveLocation:function(){var t=this;return this.$validator.validateAll("vLocation").then(function(i){i&&(t.busy=!0,t.errorMessage="",t.locationMessage="",n.Common.dataService.saveEventLocation(t.theEvent.location).then(function(){this.locationMessage="Saved..."},function(){this.locationMessage="Failed to save changes..."}).finally(function(){return t.busy=!1}))}),!1},onSaveTrack:function(){var t=this;this.busy=!0;this.errorMessage="";n.Common.dataService.saveTrack(this.newTrack).then(function(n){t.tracks.push(n.data);t.newTrack=""},function(){return t.errorMessage="Failed to save track"}).finally(function(){return t.busy=!1})},onSaveRoom:function(){var t=this;this.busy=!0;this.errorMessage="";n.Common.dataService.saveRoom(this.newRoom).then(function(n){t.rooms.push(n.data);t.newRoom=""},function(){t.errorMessage="Failed to save room"}).finally(function(){return t.busy=!1})},onSaveTimeSlot:function(){var t=this;this.busy=!0;this.errorMessage="";n.Common.dataService.saveTimeSlot(this.newTimeSlot).then(function(n){t.timeSlots.push(n.data);t.newTimeSlot=""},function(){t.errorMessage="Failed to save timeslot"}).finally(function(){return t.busy=!1})},onDeleteTrack:function(t){var i=this;this.busy=!0;this.errorMessage="";n.Common.dataService.deleteTrack(t).then(function(){return i.tracks.splice(i.tracks.indexOf(t),1)},function(){return i.errorMessage="Failed to delete track"}).finally(function(){return i.busy=!1})},onDeleteRoom:function(t){var i=this;this.busy=!0;this.errorMessage="";n.Common.dataService.deleteRoom(t).then(function(){i.rooms.splice(i.rooms.indexOf(t),1)},function(){return i.errorMessage="Failed to delete room"}).finally(function(){return i.busy=!1})},onDeleteTimeSlot:function(t){var i=this;this.busy=!0;this.errorMessage="";n.Common.dataService.deleteTimeSlot(t).then(function(){i.timeSlots.splice(i.timeSlots.indexOf(t),1)},function(){return i.errorMessage="Failed to delete timeslot"}).finally(function(){return i.busy=!1})}},computed:{},mounted:function(){Vue.Promise.all([n.Common.dataService.getEventInfo(),n.Common.dataService.getTimeSlots(),n.Common.dataService.getRooms(),n.Common.dataService.getTracks()]).then(function(n){this.theEvent=n[0].data;this.timeSlots=n[1].data;this.rooms=n[2].data;this.tracks=n[3].data}.bind(this),function(){this.errorMessage="Failed to load data"}.bind(this)).finally(function(){this.busy=!1;this.$validator.validateAll("vEvent").then(function(){}).catch(function(){});this.$validator.validateAll("vLocation").then(function(){}).catch(function(){})}.bind(this))}}}(CodeCamp||(CodeCamp={})),function(n){n.JoinView={el:"#join-view",data:{user:{name:"",email:"",password:"",confirmPassword:""},errorMessage:""},computed:{isPristine:function(){return n.Common.helpers.isPristine(this.fields)}},methods:{onSubmit:function(){var n=this;this.$validator.validateAll().then(function(t){if(!t)return n.errorMessage="Please fix validation Issues",!1})},created:function(){this.$set(this,"errors",this.$validator.errorBag)}}}}(CodeCamp||(CodeCamp={})),function(n){function t(){n.App.bootstrap(n.JoinView)}n.join=t}(CodeCamp||(CodeCamp={})),function(n){function t(){n.App.bootstrap(n.UsersView)}n.users=t;n.UsersView={el:"#users-view",data:{users:[],errorMessage:"",busy:!0},methods:{onToggleAdmin:function(n){var t=this;this.busy=!0;this.$dataService.toggleAdmin(n).then(function(t){n.isAdmin=t.data},function(){this.errorMessage="Failed to toggle admin"}).finally(function(){return t.busy=!1})},onToggleConfirmation:function(n){var t=this;this.busy=!0;this.$dataService.toggleConfirmation(n).then(function(t){n.isEmailConfirmed=t.data},function(){this.errorMessage="Failed to toggle confirmation"}).finally(function(){return t.busy=!1})}},mounted:function(){var t=this;this.$dataService=new n.Common.DataService(this.$http);this.$dataService.getUsers().then(function(n){this.users=n.data},function(){this.errorMessage="Failed to get user data"}).finally(function(){return t.busy=!1})}}}(CodeCamp||(CodeCamp={}));